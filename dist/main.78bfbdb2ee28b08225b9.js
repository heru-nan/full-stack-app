(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,a){var n=a(142),r=a(143);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},143:function(e,t,a){(t=a(144)(!1)).push([e.i,"\n.container{\n  margin: 5%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n",""]),e.exports=t},145:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"groupDeleteSaga",(function(){return A})),a.d(n,"groupCreationSaga",(function(){return C})),a.d(n,"groupModificationSaga",(function(){return U})),a.d(n,"taskCreationSaga",(function(){return D})),a.d(n,"taskModificationSaga",(function(){return k})),a.d(n,"taskDeleteSaga",(function(){return w})),a.d(n,"requests",(function(){return j})),a.d(n,"userCreationSaga",(function(){return I})),a.d(n,"userAuthenticationSaga",(function(){return N})),a.d(n,"createCommentSaga",(function(){return v})),a.d(n,"logoutSaga",(function(){return G}));var r=a(0),o=a.n(r),s=a(45),l=a.n(s),c=a(20),i=a(37),m=a(91),u=a(98),E=a(10);const d=(e="CREATING_USER",t=[],a=null)=>({type:"PROCESSING_CREATED_USER",session:a,user:e,error:t}),p=e=>({type:"LOGOUT",clean:e}),T=(e,t,a,n)=>({type:"CREATE_COMMENT",taskID:e,ownerID:t,commentID:a,content:n}),b=(e="AUTHENTICATING",t=null)=>({type:"PROCESSING_AUTHENTICATED_USER",session:t,authenticated:"AUTHENTICATED"===e}),g=(e,t,a,n)=>({type:"CREATE_TASK",groupID:e,taskID:t,ownerID:a,name:n}),S=(e={})=>({type:"SET_STATE",state:e}),_=e=>({type:"CREATE_GROUP",group:e});var O=a(167),y=a(33),h=a.n(y),f=a(24);const R=Object(f.a)();function*A(){for(;;){const{id:e}=yield Object(E.d)(["REQUEST_DELETE_GROUP"]),t=yield Object(E.c)(e=>e.session);200===(yield h.a.post("/group/delete",{id:e,session:t})).status&&(yield Object(E.b)({type:"DELETE_GROUP",id:e}))}}function*C(){for(;;){yield Object(E.d)(["REQUEST_GROUP_CREATION"]);const e=yield Object(E.c)(e=>e.session),t={name:"generic group",owner:e.id};try{const a=(yield h.a.post("/group/new",{group:t,session:e})).data;yield Object(E.b)(_(a))}catch(e){console.error("hehe")}}}function*U(){for(;;){const e=yield Object(E.d)(["SET_GROUP_NAME"]);console.log("change",e);const t=yield Object(E.c)(t=>t.groups.filter(t=>t._id===e.groupID)[0]),a=yield Object(E.c)(e=>e.session),n=yield h.a.post("/group/update",{group:{id:t._id,name:t.name,owner:t.owner},session:a});console.log(n)}}function*D(){for(;;){const{groupID:e,ownerID:t,name:a}=yield Object(E.d)("REQUEST_TASK_CREATION"),n=yield Object(E.c)(e=>e.session),r=(yield h.a.post("/task/new",{task:{group:e,owner:t,name:a,isComplete:!1},session:n})).data._id;yield Object(E.b)(g(e,r,t,a))}}function*k(){for(;;){const e=yield Object(E.d)(["SET_TASK_STATE","SET_TASK_GROUP","SET_TASK_NAME"]),t=yield Object(E.c)(t=>t.tasks.filter(t=>t._id===e.taskID)),a=yield Object(E.c)(e=>e.session),n=t[0];h.a.post("/task/update",{task:{id:n._id,group:n.group,name:n.name,isComplete:n.isComplete},session:a})}}function*w(){for(;;){const{id:e}=yield Object(E.d)("DELETE_TASK");try{const t=yield Object(E.c)(e=>e.session);yield Object(E.a)(h.a.post,"/task/delete",{id:e,session:t});yield Object(E.b)({type:"DELETE_TASK_SUCCESS",id:e}),R.push("/dashboard")}catch(e){yield Object(E.b)({type:"DELETE_TASK_FAILED",error:e})}}}function*j(){for(;;)yield Object(E.d)("DELETE_TASK",w)}function*I(){for(;;){const{username:e,password:t}=yield Object(E.d)("REQUEST_CREATED_USER");try{const{data:a}=yield h.a.post("/createUser",{username:e,password:t});a.flag?(yield Object(E.b)(d("CREATED_USER")),yield Object(E.b)({type:"CREATED_USER",username:e})):yield Object(E.b)(d("NOT_CREATED_USER",[a.error]))}catch(e){console.log(e.message)}}}function*N(){for(;;){const{username:e,password:t}=yield Object(E.d)("REQUEST_AUTHENTICATED_USER");try{const{data:a}=yield h.a.post("/authenticate",{username:e,password:t});if(!a)throw new Error;a.state.groups.length&&console.log(a.state.groups),yield Object(E.b)(S(a.state)),yield Object(E.b)({type:"SET_TOKEN",token:a.token}),yield Object(E.b)(b("AUTHENTICATED",{})),R.push("/dashboard")}catch(e){console.log(e),console.log("cant not autenthicate"),yield Object(E.b)(b("NOT_AUTHENTICATED",{}))}}}function*v(){for(;;){const{taskID:e,ownerID:t,content:a}=yield Object(E.d)("REQUEST_COMMENT_CREATION"),n=yield Object(E.c)(e=>e.session),r=Object(O.a)();yield Object(E.b)(T(e,t,r,a)),yield h.a.post("/comment/new",{comment:{_id:r,owner:t,task:e,content:a},session:n})}}function*G(){for(;;){const{session:e}=yield Object(E.d)("REQUEST_LOGOUT");console.log("LOGOUT SESSION: ",e),R.push("/"),yield Object(E.b)(p(e))}}var x=Object(i.c)({session:function(e={error:[],openModal:!1},t){let{type:a,authenticated:n}=t;switch(a){case"SET_TOKEN":return{...e,token:t.token};case"SET_STATE":return{...e,id:t.state.session.id,name:t.state.session.name,openModal:t.state.session.openModal};case"CREATED_USER":return{...e,openModal:!0,username:t.username};case"PROCESSING_AUTHENTICATED_USER":return{...e,authenticated:n};case"LOGOUT":return{error:[],openModal:!1};case"REQUEST_CREATED_USER":return{...e,user:"CREATING_USER"};case"PROCESSING_CREATED_USER":return{...e,user:t.user,error:t.error};default:return e}},tasks:function(e=[],t){switch(t.type){case"LOGOUT":return[];case"SET_STATE":return t.state.tasks;case"CREATE_TASK":return[...e,{_id:t.taskID,name:t.name,group:t.groupID,owner:t.ownerID,isComplete:!1}];case"SET_TASK_STATE":return e.map(e=>e._id===t.taskID?{...e,isComplete:!e.isComplete}:e);case"SET_TASK_GROUP":return e.map(e=>e._id===t.taskID?{...e,group:t.groupID}:e);case"SET_TASK_NAME":return e.map(e=>e._id===t.taskID?{...e,name:t.name}:e);case"DELETE_TASK_SUCCESS":return e.filter(e=>e._id.toString()!==t.id.toString())}return e},comments:function(e=[],t){switch(t.type){case"LOGOUT":return[];case"SET_STATE":return t.state.comments;case"CREATE_COMMENT":return[...e,{owner:t.ownerID,_id:t.commentID,task:t.taskID,content:t.content}]}return e},groups:function(e=[],t){switch(t.type){case"LOGOUT":return[];case"SET_STATE":return t.state.groups.length>0?t.state.groups:e;case"CREATE_GROUP":return[...e,{...t.group}];case"DELETE_GROUP":return e.filter(e=>e._id!==t.id);case"GROUP_NAME":return e.map(e=>e._id.toString()===t.id?{...e,name:t.name}:e);default:return e}},users:function(e=[],t){return e}});const M=Object(u.a)(),L=Object(i.e)(x,Object(i.a)(Object(m.createLogger)(),M));for(let e in n)M.run(n[e]);var P=a(41),z=a(66),K=a(153),Q=a(154),H=a(155),q=a(166);var W=({submit:e})=>{const[t,a]=Object(r.useState)(!1),[n,s]=Object(r.useState)("");Object(r.useRef)(null);return o.a.createElement("form",{onSubmit:e,style:{display:"flex",flexDirection:"row"}},o.a.createElement(K.a,{size:"xs"},o.a.createElement(Q.a,{borderRadius:"md",pr:"4.5rem",type:"text",placeholder:"Enter task",value:n,onChange:e=>s(e.target.value),onClick:()=>a(!0),name:"task"}),t&&o.a.createElement(H.a,null,o.a.createElement(q.a,{type:"submit",color:"green.500"},o.a.createElement(z.a,{icon:"check"})),o.a.createElement(q.a,{type:"button",onClick:e=>{s(""),a(!1)},name:"cancel",color:"green.500"},o.a.createElement(z.a,{icon:"window-close"})))))},V=a(156),B=a(157),J=a(168),F=a(158);const X=Object(c.b)((e,t)=>{let a=t.id;return{groupID:a,name:t.name,owner:t.owner,tasks:e.tasks.filter(e=>e.group===a)}},(e,t)=>{let{id:a,owner:n}=t;return{handleTaskSubmit(t){t.preventDefault();const r=t.target.task.value,o=r[0].toUpperCase()+r.slice(1);t.target.reset(),r.trim()&&e(((e,t,a)=>({type:"REQUEST_TASK_CREATION",groupID:e,ownerID:t,name:a}))(a,n,o))},handleNameChange(t){e({type:"GROUP_NAME",id:a,name:t.target.value})},handleNameSubmit(){e((e=>({type:"SET_GROUP_NAME",groupID:e}))(a))},handleDelete(){e({type:"REQUEST_DELETE_GROUP",id:a})}}})(({tasks:e,name:t,handleTaskSubmit:a,handleNameChange:n,handleNameSubmit:s,handleDelete:l})=>{const c=Object(P.f)(),[i,m]=Object(r.useState)(!1);return o.a.createElement(V.a,{as:"section",m:"2%",p:5,shadow:"md",borderWidth:"1px",flex:"1",borderRadius:"md"},o.a.createElement(B.a,{size:"l"},t),o.a.createElement(J.a,{className:"container",m:0,mt:"1%",mb:"1%",onClick:e=>e.stopPropagation()},e.map(e=>o.a.createElement(J.b,{key:e._id,textAlign:"left",as:"button",shadow:"xs",borderWidth:"1px",flex:"1",borderRadius:"md",p:"1%",onClick:()=>c.push("task/"+e._id),mt:"0.5%",mb:"0.5%"},o.a.createElement(F.a,null,e.name.length>50?e.name.slice(0,50)+"...":e.name)))),o.a.createElement(W,{submit:a}))}),Y=Object(c.b)((e,t)=>e.session.id===t.id?e.session:{name:"Error: Not user in session"})(({name:e})=>o.a.createElement("span",{style:{color:"#5eba7d"}},e?e[0].toUpperCase()+e.slice(1):"..."));var Z=a(159);const $=Object(c.b)((function(e){return{groups:e.groups,id:e.session.id}}),(function(e){return{logout(){e(((e=[])=>({type:"REQUEST_LOGOUT",session:e}))())},addNewGroup(){e({type:"REQUEST_GROUP_CREATION"})}}}))(({groups:e,id:t,addNewGroup:a})=>o.a.createElement("main",{className:"container"},o.a.createElement(B.a,{style:{display:"inline"}},"Organizer by ",o.a.createElement(Y,{id:t})),o.a.createElement(Z.a,{orientation:"horizontal"}),o.a.createElement("div",{className:"container"},e.map(e=>o.a.createElement(X,{key:e._id,id:e._id,name:e.name,owner:e.owner})),o.a.createElement(q.a,{m:"2%",onClick:a},"+"))));var ee=a(30),te=a(160),ae=a(161);const ne=Object(c.b)(e=>e,e=>({exitUser(){e({type:"LOGOUT"})}}))(({exitUser:e})=>o.a.createElement("nav",{style:{width:"100%",marginBottom:"auto"}},o.a.createElement(te.a,{m:"4%"},o.a.createElement(V.a,{p:"2"},o.a.createElement(B.a,{size:"md"},"Group App")),o.a.createElement(ae.a,null),o.a.createElement(V.a,null,o.a.createElement(q.a,{colorScheme:"teal",mr:"4"},o.a.createElement(ee.a,{to:"/dashboard"},"Organizer")),o.a.createElement(q.a,{colorScheme:"teal"},o.a.createElement(ee.a,{to:"/",onClick:e},"Log out")))),o.a.createElement(Z.a,{orientation:"horizontal"})));var re=a(162);const oe=({children:e})=>o.a.createElement(V.a,{as:"section",m:"2%",p:5,shadow:"md",borderWidth:"1px",flex:"1",borderRadius:"md"},e),se=Object(c.b)((e,t)=>{let a=t.match.params._id,n=e.tasks.find(e=>e._id===a)||null,r=e.groups||{};return{id:a,task:n,groups:r,comments:e.comments}},(e,t)=>{const a=t.match.params._id;return{deleteTask(){e({type:"DELETE_TASK",id:a})},createComment(t,n){t.preventDefault();let r=t.target.comment.value;e(((e,t,a)=>({type:"REQUEST_COMMENT_CREATION",taskID:e,ownerID:t,content:a}))(a,n,r)),t.target.reset()},changeStateTask(){e((e=>({type:"SET_TASK_STATE",taskID:e}))(a))},setTaskGroup(t){e(((e,t)=>({type:"SET_TASK_GROUP",taskID:e,groupID:t}))(a,t.target.value))},setTaskName(t){e(((e,t)=>({type:"SET_TASK_NAME",taskID:e,name:t}))(a,t.target.value))}}})(({comments:e,task:t,groups:a,changeStateTask:n,setTaskGroup:r,setTaskName:s,createComment:l,deleteTask:c})=>t&&o.a.createElement("main",{className:"container"},o.a.createElement(B.a,null,"Task details:",o.a.createElement("br",null),o.a.createElement("span",{style:{color:"#5eba7d"}},t.name.length>20?t.name.slice(0,19)+"...":t.name)),o.a.createElement(Z.a,{orientation:"horizontal"}),o.a.createElement(oe,null,o.a.createElement(B.a,{size:"l"},"Name && State"),o.a.createElement(Q.a,{size:"l",m:"1%",p:"0.5%",borderRadius:"md",value:t.name,onChange:s}),o.a.createElement(q.a,{m:"1%",bg:"green.200",color:"teal.800",size:"xs",onClick:()=>n(t.isComplete)},t.isComplete?"Complete":"Incomplete")),o.a.createElement(oe,null,o.a.createElement(B.a,{size:"l"},"Group"),o.a.createElement(re.a,{size:"xs",onChange:r,value:t.group},a.map(e=>o.a.createElement("option",{key:e._id,value:e._id},e.name)))),o.a.createElement(oe,null,o.a.createElement(B.a,{size:"l"},"Comment"),o.a.createElement("form",{onSubmit:e=>l(e,t.owner)},o.a.createElement(Q.a,{type:"text",placeholder:"Write your comment",name:"comment",defaultValue:"",size:"xs",m:"1%",p:"0.5%",borderRadius:"md"}),o.a.createElement(q.a,{size:"xs",m:"1%",bg:"green.200",color:"teal.800",type:"submit"},"Add comment")),o.a.createElement(J.c,{ml:"10%"},e.map(e=>{if(e.task===t._id)return o.a.createElement(J.b,{key:e._id},o.a.createElement("p",null,e.content))}))),o.a.createElement(V.a,{m:"2%",d:"flex",justifyContent:"space-between"},o.a.createElement(ee.a,{to:"/dashboard"},o.a.createElement(q.a,{size:"xs",m:"1%",bg:"green.200",color:"teal.800"},"Done")),o.a.createElement(q.a,{size:"xs",m:"1%",bg:"red.200",color:"teal.800",onClick:c},"Delete"))));var le=a(44),ce=a(163);function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function me({...e}){const[t,a]=o.a.useState(!1);return o.a.createElement(le.a,{id:"form-password",mb:"2%",isRequired:!0},o.a.createElement(ce.a,null,e.label),o.a.createElement(K.a,{size:"md"},o.a.createElement(Q.a,ie({},e,{pr:"4.5rem",type:t?"text":"password",placeholder:"Enter password",isRequired:!0})),o.a.createElement(H.a,{width:"4.5rem"},o.a.createElement(q.a,{h:"1.75rem",size:"sm",onClick:()=>a(!t)},t?"Hide":"Show"))))}function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ee({...e}){return o.a.createElement(le.a,{mb:"2%",id:"username",isRequired:!0},o.a.createElement(ce.a,null,"Username"),o.a.createElement(Q.a,ue({},e,{placeholder:"Enter Username"})))}var de=a(164),pe=function(){return o.a.createElement(F.a,{mt:"1%",mb:"1%"},"Don't have an account?"," ",o.a.createElement(de.a,{as:"span",color:"teal.500"},o.a.createElement(ee.a,{to:"/signin"},"create one in no time")))};const Te=Object(c.b)(({session:e})=>({authenticated:e.authenticated}),e=>({authenticateUser(t){t.preventDefault();let a=t.target.username.value,n=t.target.password.value;e(((e,t)=>({type:"REQUEST_AUTHENTICATED_USER",username:e,password:t}))(a,n))}}))(({authenticateUser:e,authenticated:t})=>o.a.createElement("div",{className:"container"},o.a.createElement(B.a,null,"Login"),o.a.createElement(Z.a,{orientation:"horizontal"}),o.a.createElement("form",{className:"container",onSubmit:e},o.a.createElement(Ee,{name:"username",defaultValue:"Invitado"}),o.a.createElement(me,{label:"Password",defaultValue:"Invitado",name:"password"}),o.a.createElement(pe,null),o.a.createElement(q.a,{colorScheme:"teal",variant:"solid",type:"submit"},"Login")),"NOT_AUTHENTICATED"===t?o.a.createElement("p",null,"login incorrect"):null));var be=a(96),ge=a.n(be);const Se={content:{top:"40%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},_e=Object(c.b)((e,t)=>({ocuppied:e.session.error.length>0,openModal:e.session.openModal,username:e.session.username||"error"}),e=>({requestSignin(t){t.preventDefault();const a=t.target.username.value,n=t.target.password.value;return console.log(t.target),console.log(t.target.password),a.length>1&&n.length>2?e(((e,t)=>({type:"REQUEST_CREATED_USER",username:e,password:t}))(a,n)):alert("CAMPO INCORRECTO")}}))(({requestSignin:e,ocuppied:t,openModal:a,username:n})=>{const r=Object(P.f)();return o.a.createElement("main",{className:"container"},o.a.createElement(ge.a,{isOpen:a,lavel:"user create modal",ariaHideApp:!1,style:Se},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},o.a.createElement("h3",null,"User created successfully"),o.a.createElement("p",null,"Username: ",o.a.createElement("span",{style:{color:"lightgreen"}},n),".",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),"Now, login to continue."),o.a.createElement("button",{className:"normal-button",onClick:()=>r.push("/")},"Login"))),o.a.createElement(B.a,null,"Sign Up"),o.a.createElement(Z.a,{orientation:"horizontal"}),o.a.createElement("form",{onSubmit:e,className:"container"},o.a.createElement(Ee,{name:"username"}),o.a.createElement(me,{label:"Password",name:"password"}),o.a.createElement(me,{label:"Repeat password",name:"password2"}),o.a.createElement(q.a,{colorScheme:"teal",variant:"solid",type:"submit"},"Signin")),o.a.createElement("div",{id:"mymodal"}))}),Oe=e=>({match:t})=>L.getState().session.authenticated?o.a.createElement(e,{match:t}):o.a.createElement(P.a,{to:"/"}),ye=()=>o.a.createElement(P.c,{history:R},o.a.createElement(c.a,{store:L},o.a.createElement(ne,null),o.a.createElement(P.b,{exact:!0,path:"/",component:Te}),o.a.createElement(P.b,{exact:!0,path:"/signin",component:_e}),o.a.createElement(P.b,{exact:!0,path:"/dashboard",render:Oe($)}),o.a.createElement(P.b,{exact:!0,path:"/task/:_id",render:Oe(se)})));a(141);var he=a(165),fe=a(48),Re=a(69);fe.b.add(Re.a,Re.b),l.a.render(o.a.createElement(he.a,null,o.a.createElement(ye,null)),document.getElementById("app"))}},[[145,41,3,1,22,5,21,27,2,7,15,23,37,40,17,19,16,29,33,4,6,8,9,10,11,12,13,14,18,20,24,26,25,28,30,34,35,36,38,39,31,32]]]);